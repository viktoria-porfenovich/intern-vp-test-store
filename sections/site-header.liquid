{% schema %}
{
  "name": "Site Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Select Menu",
      "default": "main-menu"
    }
  ],
  "presets": [
    {
      "name": "Site Header",
      "category": "Header"
    }
  ]
}
{% endschema %}

<script>console.log('hello');</script>
{%- assign menu_items = linklists[section.settings.menu].links -%}
{%- assign menu_json = menu_items | json -%}

{%- assign menu_json = '[' -%}
{%- for link in linklists[section.settings.menu].links -%}<script>console.log({{ link }});</script>
  {%- assign item = '{ "title": "' | append: link.title | append: '", "url": "' | append: link.url | append: '" }' -%}
  {%- assign menu_json = menu_json | append: item -%}
  {%- unless forloop.last -%}
    {%- assign menu_json = menu_json | append: ',' -%}
  {%- endunless -%}
{%- endfor -%}
{%- assign menu_json = menu_json | append: ']' -%}


<script>console.log({{ menu_items }});</script>

<site-header 
  logo="{{ section.settings.logo | image_url }}" name="{{ section.settings.menu.links }}"
  menu="{{ menu_json | escape }}">
</site-header>